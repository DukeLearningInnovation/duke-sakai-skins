///////////////////////////////////////////////////
// Move collapse tools toggle to upper right hamburger menu
///////////////////////////////////////////////////
@media #{$nonPhone} {
    .Mrphs-mainHeader .Mrphs-headerLogo {
        padding-left: 0;
    }
    .#{$namespace}collapseTools button.js-toggle-nav {
        width: 52px;
        float: left;
        color: var(--sites-nav-menu-item-selected-color);
        background-color: var(--sites-nav-menu-item-selected-background);
        border-radius: 0;
        
        &:hover,
        &:focus {
            background-color: var(--sites-nav-menu-item-selected-hover-background);
        }

        &:active {
            background-color: var(--sites-nav-menu-item-selected-active-background);
        }
    }
    .Mrphs-headerLogo--institution {
        margin-left: 16px;
    }
    html[dir="rtl"] {
        .Mrphs-mainHeader .Mrphs-headerLogo {
            padding-right: 0;
        }
        .#{$namespace}collapseTools {
                float: right;
        }
        #toolMenu ul li .Mrphs-toolsNav__menuitem--link,
        #toolMenu #selectQuickLink li .Mrphs-toolsNav__menuitem--link,
        #subSites ul li .Mrphs-toolsNav__menuitem--link,
        #subSites #selectQuickLink li .Mrphs-toolsNav__menuitem--link {
            border-radius:  calc(16px * 1.5) 0 0 calc(16px * 1.5);
        }
    }
}
@media #{$phone} {
    .#{$namespace}collapseTools {
        display: none;
    }
}

///////////////////////////////////////////////////
// Jumbotron dark theme
///////////////////////////////////////////////////
.jumbotron {
    color: var(--sakai-text-color-1);
    background-color: var(--sakai-background-color-2);

    h1,
    .h1 {
      color: var(--sakai-text-color-1);
    }

  
    > hr {
      border-top-color: var(--sakai-border-color);
    }
}

///////////////////////////////////////////////////
// Make delete buttons red
///////////////////////////////////////////////////
.act .active[value="Remove"], //announcements, dropbox, resources, samigo
.act #btnRemove, //assignments
.act #delete, //assignments
.act #btnHardRemove, //assignments
.act input[type="submit"][value="Remove Event"], //calendar
.act input[value="Delete Forum"], //forums
.act input[value="Delete Topic"], //forums
.Mrphs-sakai-forums .otherActions a:last-of-type, //forums message
.act input[value="Delete"], //forums
.act #delete-polls, //polls
.act input[value="Remove Meetings"], //signup
.act #delete-groups-submit-button, //siteinfo
.Mrphs-sakai-samigo #authorIndexForm\:remove-selected:not(.fc-button), //samigo
.extendedTimeDataTable input[value="Delete"], //samigo
.ui-widget[aria-describedby="delete-confirm"] .ui-dialog-buttonpane button.ui-button:first-of-type, //lessons delete item #241
.act .delete //rubrics
{

    @include sakai_button(	var(--sakai-color-red--lighter-7),
							var(--sakai-color-red--darker-1),
							var(--sakai-color-red--darker-2),
							var(--sakai-color-red--lighter-7),
							var(--sakai-color-red--darker-2),
							var(--sakai-color-red--darker-3),
							var(--sakai-color-red--lighter-7),
							var(--sakai-color-red--darker-3),
							var(--sakai-color-red--darker-4),
							$button-primary-text-transform,
							$button-primary-font-weight,
							var(--button-primary-shadow),
							var(--button-primary-hover-shadow),
							var(--button-primary-active-shadow));
	margin-right: $standard-space;
}
.act #delete-button { //dropbox button-group
	$red-light: #f1d3d3;
	@include sakai_button(	var(--sakai-color-red--darker-6),
							var(--sakai-color-red--lighter-1),
							var(--sakai-color-red--lighter-2),
							var(--sakai-color-red--darker-6),
							var(--sakai-color-red--lighter-2),
							var(--sakai-color-red--lighter-3),
							var(--sakai-color-red--darker-6),
							var(--sakai-color-red--lighter-3),
							var(--sakai-color-red--lighter-4),
							$button-primary-text-transform,
							$button-primary-font-weight,
							var(--button-primary-shadow),
							var(--button-primary-hover-shadow),
							var(--button-primary-active-shadow));
	border-radius: 0 4px 4px 0;
}
.controlsPanel .act .deleteButton,
.act .deleteButton { //lessons delete subpage #240
	@include sakai_button(	var(--sakai-color-red--lighter-7) !important,
							var(--sakai-color-red--darker-1) !important,
							var(--sakai-color-red--darker-2) !important,
							var(--sakai-color-red--lighter-7) !important,
							var(--sakai-color-red--darker-2) !important,
							var(--sakai-color-red--darker-3) !important,
							var(--sakai-color-red--lighter-7) !important,
							var(--sakai-color-red--darker-3) !important,
							var(--sakai-color-red--darker-4) !important,
							$button-primary-text-transform !important,
							$button-primary-font-weight !important,
							var(--button-primary-shadow) !important,
							var(--button-primary-hover-shadow) !important,
							var(--button-primary-active-shadow) !important);
	margin-right: $standard-space;
}

///////////////////////////////////////////////////
// CKEditor
///////////////////////////////////////////////////
.cke {
    .cke_button__sakaipreview {
		.cke_button__sakaipreview_icon {
			background: url(/library/webjars/ckeditor4/4.16.1/full/skins/moono-lisa/icons_hidpi.png) no-repeat 0 -1632px !important;
        }
    }
    a.cke_toolbox_collapser {
        order: 1;
        height: 24px;
        width: 24px;
        line-height: 28px;
        margin: 0 6px 0 0;
        padding: 1px;
        color: var(--sakai-text-color-1);
        border-color: var(--sakai-border-color);
        &:hover,
        &:focus {
            background: var(--sakai-background-color-2);
        }
        &:active {
            background: var(--sakai-background-color-3);
        }
        .cke_arrow {
            border-width: 6px;
            border-top-color: var(--sakai-text-color-1);
            border-bottom-color: transparent;
            margin: 0;
            position: relative;
            top: 2px;
            left: 0;
        }
    }
    a.cke_toolbox_collapser_min {
        .cke_arrow {
            border-left-color: var(--sakai-text-color-1);
            border-bottom-color: transparent;
            border-top-color: transparent;
            left: 4px;
            top:-2px;
        }
    }
    .cke_combo__format .cke_combo_button,
    .cke_combo__styles .cke_combo_button {
        border: 1px solid var(--sakai-border-color);
        padding: 0;
    }
    a.cke_button.cke_button__templates {
        padding: 4px 14px 4px 6px;

        &:hover,
        &:focus,
        &:active {
            padding: 3px 13px 3px 5px;
        }
        &.cke_button_disabled {
            .cke_button_label {
                opacity: .3;
            }
            &:hover,
            &:focus,
            &:active {
                padding: 4px 14px 4px 6px;
            }	
        }
    }

    a.cke_button.cke_button__source {
        padding:4px 31px 4px 6px;

        &:hover,
        &:focus,
        &:active {
            padding: 3px 30px 3px 5px;
        }
    }
    a.cke_button_on.cke_button__source {
        padding: 3px 30px 3px 5px;

    }
    .cke_toolbox_main {
        display: block;
        order: 2;
    }
    .cke_top.min,
    .cke_toolbox.min,
    .cke_toolbox_main.min {
        height: 32px !important; //!important to override inline styles set by ckeditor
        display: block !important;
    }
    .cke_combo__format .cke_combo_text {
        width: 45px; //adjust width to make icons line up across mutliple lines
    }
}

///////////////////////////////////////////////////
// Adjust table styles
///////////////////////////////////////////////////
table caption {
    text-align: center;
}

///////////////////////////////////////////////////
// Adjust forums styles
///////////////////////////////////////////////////
.#{$namespace}sakai-forums{
	.topicBlocLone{
		border: none;
        background: var(--sakai-background-color-2);
        color: var(--sakai-text-color-1);
        padding: 0;
        margin: 0 0 $standard-spacing 0;
	}
    //most breadcrumbs
    h3.specialLink,
    #msgForum .specialLink h1,
    .specialLink .specialLink h3 {
            font-weight: 400;
            font-size: 16px;
    }
    a[id$="df_componse_message_dfAllMessages"],
    a[id~="msgForum:replyThread"],
    input[id~="dfCompose:post"] {
            @include sakai_primary_button();
            margin: $standard-spacing calc( #{$standard-spacing} / 2) $standard-spacing 0;
    }
}

///////////////////////////////////////////////////
// duke-296 adjust lessons styles
///////////////////////////////////////////////////

@mixin sakaiLessonsLayoutColorScheme($color, $lighterOrDarker, $name){
	// Color scheme generation in Lessons Layouts
	// Use any color previously defined via defineColorHSL
	// @include sakaiLessonsLayoutColorScheme($color, $lighterOrDarker, $name)
	// @param color
	//      Type: string
	//      expects the same value used to define a color palette in defineColorHSL
	// @param lighterOrDarker
	//      Type: string
	//      expects a string either lighter or darker
	// @param name
	//      Type: string
	//      expects a string which matches the classes the lessons tool will apply to the markup
	// @returns a set of CSS selectors and rules
	// Example usage 
	//      @include sakaiLessonsLayoutColorScheme('--sakai-color-gray', 'lighter', 'gray');

		$shade1: #{$color}--#{$lighterOrDarker}-1;
		$shade2: #{$color}--#{$lighterOrDarker}-2;
		$shade3: #{$color};
		$shade4: #{$color}--#{$lighterOrDarker}-7;
		@if $lighterOrDarker == 'darker' {
			$shade1: #{$color}--#{$lighterOrDarker}-4;
			$shade2: #{$color}--#{$lighterOrDarker}-5;
			$shade3: #{$color}--#{$lighterOrDarker}-3;
			$shade4: #{$color}--#{$lighterOrDarker}-7;
		}
		
		.coln#{$name}, .coln#{$name}-trans {
			background: var(--sakai-background-color-1);
			border: 1px solid var($shade1);
		}
		.coln#{$name}-header, .coln#{$name}-trans-header {
			@extend .sakai-colorize#{$shade2};
			border: 1px solid var(#{$shade2});
		}
		.collapsibleSectionHeader.coln#{$name}-header:hover, .collapsibleSectionHeader.coln#{$name}-trans-header:hover {
			@extend .sakai-colorize#{$shade1};
			border-color: var(#{$shade1});
		}
		.collapsibleSectionHeader.coln#{$name}-header:active, .collapsibleSectionHeader.coln#{$name}-trans-header:active {
			@extend .sakai-colorize#{$shade3};
			border-color: var(#{$shade3});
		}
		.coln#{$name}-header + .section {
			border: 1px solid var(#{$shade2});
			// border-top: none; // #duke-310
		}
		
		.coln#{$name} {
			.questionDiv .contentCol, .checklistDiv {
				@extend .sakai-colorize#{$shade4};
			}
			input[type="submit"].question-submit,
			.linkCell .addStudentContent,
			input[type="submit"].setStudentZero {
				@extend .sakai-colorize#{$shade2};
				border: 1px solid var(#{$shade2});
				&:hover,
				&:focus {
					@extend .sakai-colorize#{$shade1};
					border: 1px solid var(#{$shade1});
				}
				&:active {
					@extend .sakai-colorize#{$shade3};
					border: 1px solid var(#{$shade3});
				}
			}
			input[type="submit"].question-submit,.linkCell .addStudentContent, input[type="submit"].setStudentZero {
				margin-top: $standard-space-4x;
			}
		}

		.usebutton.n#{$name},
		.usebutton.n#{$name}-trans {
            @extend .sakai-colorize#{$shade2};

            border: 1px solid var(#{$shade2}) !important;
            &:hover,
				&:focus {
					@extend .sakai-colorize#{$shade1};
					border: 1px solid var(#{$shade1});
				}
				&:active {
					@extend .sakai-colorize#{$shade3};
					border: 1px solid var(#{$shade3});
				}
		}
	}
.#{$namespace}sakai-lessonbuildertool {

        // @include sakaiLessonsLayoutColorScheme('--sakai-color-gray', 'lighter', 'gray');
        // @include sakaiLessonsLayoutColorScheme('--sakai-color-gray', 'darker', 'black');
        @include sakaiLessonsLayoutColorScheme('--duke-navy', 'lighter', 'blue');
        @include sakaiLessonsLayoutColorScheme('--duke-navy', 'darker', 'blue2');
        // @include sakaiLessonsLayoutColorScheme('--sakai-color-red', 'lighter', 'red');
        @include sakaiLessonsLayoutColorScheme('--duke-piedmont', 'lighter', 'green');
        @include sakaiLessonsLayoutColorScheme('--duke-copper', 'lighter', 'orange');
        @include sakaiLessonsLayoutColorScheme('--duke-dandelion', 'lighter', 'gold');
        @include sakaiLessonsLayoutColorScheme('--duke-eno', 'lighter', 'teal');
        @include sakaiLessonsLayoutColorScheme('--duke-ironweed', 'lighter', 'purple');

        // @include sakaiLessonsLayoutColorScheme('--sakai-lessons-navy', 'lighter', 'navy' );
        // @include sakaiLessonsLayoutColorScheme('--sakai-lessons-navy', 'darker', 'navy2' );

        .navIntraTool:last-of-type {
            position: sticky;
            bottom: 0;
            background: var(--sakai-background-color-1);
        }
        .bottomButtons {
            margin: $standard-space-2x 0;

            .button:last-of-type {
                    @include sakai_primary_button();
            }
        }
}

///////////////////////////////////////////////////
// duke-303 adjust jumptotop styles
///////////////////////////////////////////////////
#jumptotop {
    bottom: 10px;
    height: 40px;
    width: 40px;
    background-size: 40px;
    border-radius: 20px;
}

///////////////////////////////////////////////////
// duke-308 make lessons page titles wrap in sidebar
///////////////////////////////////////////////////
body #toolMenu li.has-lessons-sub-pages.has-lessons-sub-pages .lessons-top-level-placeholder:hover .lessons-goto-top-page .Mrphs-toolsNav__menuitem--title,
body #toolMenu li.has-lessons-sub-pages.has-lessons-sub-pages .lessons-top-level-placeholder:active .lessons-goto-top-page .Mrphs-toolsNav__menuitem--title {
    width: calc(216px - 52px - 16px);
    
}

body #toolMenu li.has-lessons-sub-pages.has-lessons-sub-pages .lessons-top-level-placeholder:hover .lessons-goto-top-page .Mrphs-toolsNav__menuitem--title:after,
body #toolMenu li.has-lessons-sub-pages.has-lessons-sub-pages .lessons-top-level-placeholder:active .lessons-goto-top-page .Mrphs-toolsNav__menuitem--title:after {
    top: calc(50% - 8px);
    right: 4px;
    left: unset;
    padding-left: 0;
}

body:not(.Mrphs-toolMenu-collapsed) {
    #toolMenu ul li .Mrphs-toolsNav__menuitem--link .Mrphs-toolsNav__menuitem--title,
    #toolMenu #selectQuickLink li .Mrphs-toolsNav__menuitem--link .Mrphs-toolsNav__menuitem--title,
    #subSites ul li .Mrphs-toolsNav__menuitem--link .Mrphs-toolsNav__menuitem--title,
    #subSites #selectQuickLink li .Mrphs-toolsNav__menuitem--link .Mrphs-toolsNav__menuitem--title,
    #toolMenu li.has-lessons-sub-pages ul.lessons-sub-page-menu li a,
    #toolMenu li.has-lessons-sub-pages #selectQuickLink.lessons-sub-page-menu li a {
        text-overflow: unset;
        white-space: unset;
        overflow: unset;
    }
}

body.Mrphs-toolMenu-collapsed:not(.tool-maximised) {
    #toolMenu ul li .Mrphs-toolsNav__menuitem--link.lessons-top-level-placeholder,
    #toolMenu #selectQuickLink li .Mrphs-toolsNav__menuitem--link.lessons-top-level-placeholder,
    #subSites:not(.floating) ul li .Mrphs-toolsNav__menuitem--link.lessons-top-level-placeholder,
    #subSites:not(.floating) #selectQuickLink li .Mrphs-toolsNav__menuitem--link.lessons-top-level-placeholder {
        padding: 0;
    }

    #toolMenu li.has-lessons-sub-pages.has-lessons-sub-pages .lessons-top-level-placeholder:hover .lessons-goto-top-page .Mrphs-toolsNav__menuitem--title,
    #toolMenu li.has-lessons-sub-pages.has-lessons-sub-pages .lessons-top-level-placeholder:active .lessons-goto-top-page .Mrphs-toolsNav__menuitem--title {
        width: unset;
    }
} 

///////////////////////////////////////////////////
// make sidebar more slacklike. help with trinity transition
///////////////////////////////////////////////////
#toolMenu ul li .Mrphs-toolsNav__menuitem--link,
#toolMenu #selectQuickLink li .Mrphs-toolsNav__menuitem--link,
#subSites ul li .Mrphs-toolsNav__menuitem--link,
#subSites #selectQuickLink li .Mrphs-toolsNav__menuitem--link,
body #toolMenu li.has-lessons-sub-pages ul.lessons-sub-page-menu li a,
body #toolMenu li.has-lessons-sub-pages #selectQuickLink.lessons-sub-page-menu li a {
    border-radius: 0;
    margin:0;
}

#toolMenu ul li .Mrphs-toolsNav__menuitem--link:hover,
#toolMenu ul li .Mrphs-toolsNav__menuitem--link:active {
    box-shadow: none;
}
